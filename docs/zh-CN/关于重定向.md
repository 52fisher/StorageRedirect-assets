### 被重定向应用的行为变化

* 对 _标准文件夹_ 以外的文件和文件夹读写操作会被重定向至它们的重定向空间

  每个应用都可以被设置它的重定向目标是在“数据文件夹”还是“缓存文件夹”。如果没有单独指定重定向目标，它将会和全局设置保持一致，其默认值是 **“缓存文件夹”** 。

  - 当重定向到 **“数据文件夹”** 时（数据文件夹的目录格式通常是 `/sdcard/Android/data/<package_name>/sdcard`），重定向的文件和文件夹不会在清理应用缓存时被删除。如果你尝试卸载应用，重定向空间会被清空。

  - 当重定向到 **“缓存文件夹”** 时（缓存文件夹的目录格式通常是 `/sdcard/Android/data/<package_name>/cache/sdcard`），重定向的文件和文件夹会在清理应用缓存或卸载应用时被删除。如果被重定向的应用将它的重要数据放在不标准的文件夹，你可能会随着缓存一同丢失数据。

  举例来说，假设有一个叫 aaa (package: `example.aaa`) 的应用，读写 `/sdcard/aaa/blbl.txt` 时，实际会读写 `/sdcard/Android/data/example.aaa/cache/sdcard`，因为 `/sdcard/aaa` 不是  _标准文件夹_。

* 为避免在部分设备上的问题，从 0.12.0 版本开始，被重定向的应用的存储权限会在开启重定向和每次重定向服务启动时被授予；从 0.15.9 版本开始，存储权限会被每次启动应用时被授予

> _标准文件夹_ 指 Android 系统默认会创建的文件夹，如 `Android` `Pictures` `Music` 等。在未来的版本可以针对每个应用单独指定什么是标准文件夹。

### 被重定向的应用仍会产生文件

请尝试 [增强模块](https://rikka.app/storage_redirect/docs/zh-CN/?doc=增强模块)

### 会影响应用正常使用的情况

* 应用使用系统的 _下载管理器_，如果存放位置不在 _标准文件夹_ 内，应用会无法使用下载后的文件
* 应用会无法访问 _标准文件夹_ 以外的文件和文件夹，如发送图片、发送文件等功能会受到影响（如果需要访问的文件不在 _标准文件夹_ 内）
* 接收 file uri 的分享，如果文件不在  _标准文件夹_ 内会提示找不到文件（但是分享 file uri 出去的劣质应用只是少数）
* 启动其他应用时使用 file uri（如 QQ 的使用其他应用打开接收的文件），如果文件不在  _标准文件夹_ 内会提示找不到文件（但不必担心，因为像 QQ 这样的劣质应用只是少数）

### 注意

* 开启重定向时，被重定向应用会被强行停止
* 因为 `/sdcard` 中的文件并没有具体所有者，重定向应用之前产生的文件需要手动删除
* 不要手动撤销被重定向应用的存储权限，否则如果在使用中授予存储权限，重定向会失效